{"version":3,"file":"ng2-completer.umd.js","sources":["services/completer-data-factory.js","directives/ctr-completer.js","services/completer-base-data.js","services/local-data.js","services/remote-data.js","services/completer-service.js","globals.js","components/completer-cmp.js","components/completer-list-item-cmp.js","directives/ctr-dropdown.js","directives/ctr-input.js","directives/ctr-list.js","directives/ctr-row.js","ng2-completer.module.js"],"sourcesContent":["import { Http } from \"@angular/http\";\nimport { LocalData } from \"./local-data\";\nimport { RemoteData } from \"./remote-data\";\nexport function localDataFactory() {\n    return function () {\n        return new LocalData();\n    };\n}\nexport function remoteDataFactory(http) {\n    return function () {\n        return new RemoteData(http);\n    };\n}\nexport var LocalDataFactoryProvider = { provide: LocalData, useFactory: localDataFactory };\nexport var RemoteDataFactoryProvider = { provide: RemoteData, useFactory: remoteDataFactory, deps: [Http] };\n//# sourceMappingURL=completer-data-factory.js.map","import { Directive, EventEmitter, Output } from \"@angular/core\";\nvar CtrCompleter = (function () {\n    function CtrCompleter() {\n        this.selected = new EventEmitter();\n        this.highlighted = new EventEmitter();\n        this._hasHighlited = false;\n        this.hasSelected = false;\n        this._cancelBlur = false;\n    }\n    CtrCompleter.prototype.ngOnInit = function () {\n        //\n    };\n    CtrCompleter.prototype.registerList = function (list) {\n        this.list = list;\n    };\n    CtrCompleter.prototype.registerDropdown = function (dropdown) {\n        this.dropdown = dropdown;\n    };\n    CtrCompleter.prototype.onHighlighted = function (item) {\n        this.highlighted.emit(item);\n        this._hasHighlited = !!item;\n    };\n    CtrCompleter.prototype.onSelected = function (item) {\n        this.selected.emit(item);\n        if (item) {\n            this.hasSelected = true;\n        }\n        this.clear();\n    };\n    CtrCompleter.prototype.search = function (term) {\n        if (this.hasSelected) {\n            this.selected.emit(null);\n            this.hasSelected = false;\n        }\n        if (this.list) {\n            this.list.search(term);\n        }\n    };\n    CtrCompleter.prototype.clear = function () {\n        if (this.dropdown) {\n            this.dropdown.clear();\n        }\n        if (this.list) {\n            this.list.clear();\n        }\n        this._hasHighlited = false;\n    };\n    CtrCompleter.prototype.selectCurrent = function () {\n        if (this.dropdown) {\n            this.dropdown.selectCurrent();\n        }\n    };\n    CtrCompleter.prototype.nextRow = function () {\n        if (this.dropdown) {\n            this.dropdown.nextRow();\n        }\n    };\n    CtrCompleter.prototype.prevRow = function () {\n        if (this.dropdown) {\n            this.dropdown.prevRow();\n        }\n    };\n    CtrCompleter.prototype.hasHighlited = function () {\n        return this._hasHighlited;\n    };\n    CtrCompleter.prototype.cancelBlur = function (cancel) {\n        this._cancelBlur = cancel;\n    };\n    CtrCompleter.prototype.isCancelBlur = function () {\n        return this._cancelBlur;\n    };\n    return CtrCompleter;\n}());\nexport { CtrCompleter };\nCtrCompleter.decorators = [\n    { type: Directive, args: [{\n                selector: \"[ctrCompleter]\",\n            },] },\n];\n/** @nocollapse */\nCtrCompleter.ctorParameters = function () { return []; };\nCtrCompleter.propDecorators = {\n    'selected': [{ type: Output },],\n    'highlighted': [{ type: Output },],\n};\n//# sourceMappingURL=ctr-completer.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { Subject } from \"rxjs/Subject\";\nvar CompleterBaseData = (function (_super) {\n    __extends(CompleterBaseData, _super);\n    function CompleterBaseData() {\n        return _super.call(this) || this;\n    }\n    CompleterBaseData.prototype.cancel = function () { };\n    CompleterBaseData.prototype.searchFields = function (searchFields) {\n        this._searchFields = searchFields;\n        return this;\n    };\n    CompleterBaseData.prototype.titleField = function (titleField) {\n        this._titleField = titleField;\n        return this;\n    };\n    CompleterBaseData.prototype.descriptionField = function (descriptionField) {\n        this._descriptionField = descriptionField;\n        return this;\n    };\n    CompleterBaseData.prototype.imageField = function (imageField) {\n        this._imageField = imageField;\n        return this;\n    };\n    CompleterBaseData.prototype.extractMatches = function (data, term) {\n        var _this = this;\n        var matches = [];\n        var searchFields = this._searchFields ? this._searchFields.split(\",\") : null;\n        if (this._searchFields !== null && this._searchFields !== undefined && term != \"\") {\n            matches = data.filter(function (item) {\n                var values = searchFields ? searchFields.map(function (searchField) { return _this.extractValue(item, searchField); }).filter(function (value) { return !!value; }) : [item];\n                return values.some(function (value) { return value.toString().toLowerCase().indexOf(term.toString().toLowerCase()) >= 0; });\n            });\n        }\n        else {\n            matches = data;\n        }\n        return matches;\n    };\n    CompleterBaseData.prototype.extractTitle = function (item) {\n        var _this = this;\n        // split title fields and run extractValue for each and join with ' '\n        return this._titleField.split(\",\")\n            .map(function (field) {\n            return _this.extractValue(item, field);\n        })\n            .join(\" \");\n    };\n    CompleterBaseData.prototype.extractValue = function (obj, key) {\n        var keys;\n        var result;\n        if (key) {\n            keys = key.split(\".\");\n            result = obj;\n            for (var i = 0; i < keys.length; i++) {\n                if (result) {\n                    result = result[keys[i]];\n                }\n            }\n        }\n        else {\n            result = obj;\n        }\n        return result;\n    };\n    CompleterBaseData.prototype.processResults = function (matches) {\n        var i;\n        var description = \"\";\n        var image = null;\n        var formattedText;\n        var formattedDesc;\n        var results = [];\n        if (matches && matches.length > 0) {\n            for (i = 0; i < matches.length; i++) {\n                if (this._titleField) {\n                    formattedText = this.extractTitle(matches[i]);\n                }\n                else {\n                    formattedText = matches[i];\n                }\n                if (this._descriptionField) {\n                    description = formattedDesc = this.extractValue(matches[i], this._descriptionField);\n                }\n                if (this._imageField) {\n                    image = this.extractValue(matches[i], this._imageField);\n                }\n                results.push({\n                    title: formattedText,\n                    description: formattedDesc,\n                    image: image,\n                    originalObject: matches[i]\n                });\n            }\n        }\n        return results;\n    };\n    return CompleterBaseData;\n}(Subject));\nexport { CompleterBaseData };\n//# sourceMappingURL=completer-base-data.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { Injectable } from \"@angular/core\";\nimport { Observable } from \"rxjs/Observable\";\nimport { CompleterBaseData } from \"./completer-base-data\";\nvar LocalData = (function (_super) {\n    __extends(LocalData, _super);\n    function LocalData() {\n        return _super.call(this) || this;\n    }\n    LocalData.prototype.data = function (data) {\n        var _this = this;\n        if (data instanceof Observable) {\n            data.subscribe(function (res) {\n                _this._data = res;\n                if (_this.savedTerm) {\n                    _this.search(_this.savedTerm);\n                }\n            });\n        }\n        else {\n            this._data = data;\n        }\n        return this;\n    };\n    LocalData.prototype.search = function (term) {\n        if (!this._data) {\n            this.savedTerm = term;\n        }\n        else {\n            this.savedTerm = null;\n            var matches = this.extractMatches(this._data, term);\n            this.next(this.processResults(matches));\n        }\n    };\n    return LocalData;\n}(CompleterBaseData));\nexport { LocalData };\nLocalData.decorators = [\n    { type: Injectable },\n];\n/** @nocollapse */\nLocalData.ctorParameters = function () { return []; };\n//# sourceMappingURL=local-data.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { Headers } from \"@angular/http\";\nimport \"rxjs/add/operator/map\";\nimport \"rxjs/add/operator/catch\";\nimport { CompleterBaseData } from \"./completer-base-data\";\nvar RemoteData = (function (_super) {\n    __extends(RemoteData, _super);\n    function RemoteData(http) {\n        var _this = _super.call(this) || this;\n        _this.http = http;\n        _this._urlFormater = null;\n        _this._dataField = null;\n        return _this;\n    }\n    RemoteData.prototype.remoteUrl = function (remoteUrl) {\n        this._remoteUrl = remoteUrl;\n        return this;\n    };\n    RemoteData.prototype.urlFormater = function (urlFormater) {\n        this._urlFormater = urlFormater;\n    };\n    RemoteData.prototype.dataField = function (dataField) {\n        this._dataField = dataField;\n    };\n    RemoteData.prototype.headers = function (headers) {\n        this._headers = headers;\n    };\n    RemoteData.prototype.search = function (term) {\n        var _this = this;\n        this.cancel();\n        // let params = {};\n        var url = \"\";\n        if (this._urlFormater) {\n            url = this._urlFormater(term);\n        }\n        else {\n            url = this._remoteUrl + encodeURIComponent(term);\n        }\n        this.remoteSearch = this.http.get(url, { headers: this._headers || new Headers() })\n            .map(function (res) { return res.json(); })\n            .map(function (data) {\n            var matchaes = _this.extractValue(data, _this._dataField);\n            return _this.extractMatches(matchaes, term);\n        })\n            .map(function (matches) {\n            var results = _this.processResults(matches);\n            _this.next(results);\n            return results;\n        })\n            .catch(function (err) {\n            _this.error(err);\n            return null;\n        })\n            .subscribe();\n    };\n    RemoteData.prototype.cancel = function () {\n        if (this.remoteSearch) {\n            this.remoteSearch.unsubscribe();\n        }\n    };\n    return RemoteData;\n}(CompleterBaseData));\nexport { RemoteData };\n//# sourceMappingURL=remote-data.js.map","import { Injectable, Inject } from \"@angular/core\";\nimport { LocalData } from \"./local-data\";\nimport { RemoteData } from \"./remote-data\";\nvar CompleterService = (function () {\n    function CompleterService(localDataFactory, // Using any instead of () => LocalData because on AoT errors\n        remoteDataFactory // Using any instead of () => LocalData because on AoT errors\n    ) {\n        this.localDataFactory = localDataFactory;\n        this.remoteDataFactory = remoteDataFactory; // Using any instead of () => LocalData because on AoT errors\n    }\n    CompleterService.prototype.local = function (data, searchFields, titleField) {\n        if (searchFields === void 0) { searchFields = \"\"; }\n        if (titleField === void 0) { titleField = \"\"; }\n        var localData = this.localDataFactory();\n        return localData\n            .data(data)\n            .searchFields(searchFields)\n            .titleField(titleField);\n    };\n    CompleterService.prototype.remote = function (url, searchFields, titleField) {\n        if (searchFields === void 0) { searchFields = \"\"; }\n        if (titleField === void 0) { titleField = \"\"; }\n        var remoteData = this.remoteDataFactory();\n        return remoteData\n            .remoteUrl(url)\n            .searchFields(searchFields)\n            .titleField(titleField);\n    };\n    return CompleterService;\n}());\nexport { CompleterService };\nCompleterService.decorators = [\n    { type: Injectable },\n];\n/** @nocollapse */\nCompleterService.ctorParameters = function () { return [\n    { type: undefined, decorators: [{ type: Inject, args: [LocalData,] },] },\n    { type: undefined, decorators: [{ type: Inject, args: [RemoteData,] },] },\n]; };\n//# sourceMappingURL=completer-service.js.map","export var MAX_CHARS = 524288; // the default max length per the html maxlength attribute\n// the default max length per the html maxlength attribute\nexport var MIN_SEARCH_LENGTH = 3;\nexport var PAUSE = 250;\nexport var TEXT_SEARCHING = \"Searching...\";\nexport var TEXT_NORESULTS = \"No results found\";\nexport var CLEAR_TIMEOUT = 100;\n//# sourceMappingURL=globals.js.map","\"use strict\";\nimport { Component, Input, Output, EventEmitter, ViewChild, forwardRef } from \"@angular/core\";\nimport { FormControl, NG_VALUE_ACCESSOR } from \"@angular/forms\";\nimport { CtrCompleter } from \"../directives/ctr-completer\";\nimport { CompleterService } from \"../services/completer-service\";\nimport { MAX_CHARS, MIN_SEARCH_LENGTH, PAUSE, TEXT_SEARCHING, TEXT_NORESULTS } from \"../globals\";\nimport \"rxjs/add/operator/catch\";\nvar noop = function () { };\nvar COMPLETER_CONTROL_VALUE_ACCESSOR = {\n    provide: NG_VALUE_ACCESSOR,\n    useExisting: forwardRef(function () { return CompleterCmp; }),\n    multi: true\n};\nvar CompleterCmp = (function () {\n    function CompleterCmp(completerService) {\n        this.completerService = completerService;\n        this.inputName = \"\";\n        this.inputId = \"\";\n        this.pause = PAUSE;\n        this.minSearchLength = MIN_SEARCH_LENGTH;\n        this.maxChars = MAX_CHARS;\n        this.overrideSuggested = false;\n        this.clearSelected = false;\n        this.fillHighlighted = true;\n        this.placeholder = \"\";\n        this.textSearching = TEXT_SEARCHING;\n        this.textNoResults = TEXT_NORESULTS;\n        this.autoMatch = false;\n        this.disableInput = false;\n        this.autofocus = false;\n        this.selected = new EventEmitter();\n        this.highlighted = new EventEmitter();\n        this.blur = new EventEmitter();\n        this.focusEvent = new EventEmitter();\n        this.searchStr = \"\";\n        this.control = new FormControl(\"\");\n        this.displaySearching = true;\n        this._onTouchedCallback = noop;\n        this._onChangeCallback = noop;\n        this._focus = false;\n    }\n    Object.defineProperty(CompleterCmp.prototype, \"value\", {\n        get: function () { return this.searchStr; },\n        set: function (v) {\n            if (v !== this.searchStr) {\n                this.searchStr = v;\n            }\n            // Propagate the change in any case\n            this._onChangeCallback(v);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    ;\n    CompleterCmp.prototype.ngAfterViewInit = function () {\n        if (this.autofocus) {\n            this._focus = true;\n        }\n    };\n    CompleterCmp.prototype.ngAfterViewChecked = function () {\n        if (this._focus) {\n            this.ctrInput.nativeElement.focus();\n            this._focus = false;\n        }\n    };\n    CompleterCmp.prototype.onTouched = function () {\n        this._onTouchedCallback();\n    };\n    CompleterCmp.prototype.writeValue = function (value) {\n        this.searchStr = value;\n    };\n    CompleterCmp.prototype.registerOnChange = function (fn) {\n        this._onChangeCallback = fn;\n    };\n    CompleterCmp.prototype.registerOnTouched = function (fn) {\n        this._onTouchedCallback = fn;\n    };\n    CompleterCmp.prototype.ngOnInit = function () {\n        var _this = this;\n        if (this.datasource) {\n            if (this.datasource instanceof Array) {\n                this.dataService = this.completerService.local(this.datasource);\n            }\n            else if (typeof (this.datasource) === \"string\") {\n                this.dataService = this.completerService.remote(this.datasource);\n            }\n            else {\n                this.dataService = this.datasource;\n            }\n        }\n        this.completer.selected.subscribe(function (item) {\n            var title = item ? item.title : \"\";\n            _this.selected.emit(item);\n            _this._onChangeCallback(title);\n        });\n        this.completer.highlighted.subscribe(function (item) {\n            _this.highlighted.emit(item);\n        });\n        if (this.textSearching === \"false\") {\n            this.displaySearching = false;\n        }\n    };\n    CompleterCmp.prototype.onBlur = function () {\n        this.blur.emit();\n        this.onTouched();\n    };\n    CompleterCmp.prototype.onFocus = function () {\n        this.focusEvent.emit();\n        this.onTouched();\n    };\n    CompleterCmp.prototype.onChange = function (value) {\n        this.value = value;\n    };\n    CompleterCmp.prototype.open = function (searchValue) {\n        if (searchValue === void 0) { searchValue = \"\"; }\n        this.completer.search(searchValue);\n    };\n    CompleterCmp.prototype.close = function () {\n        this.completer.clear();\n    };\n    CompleterCmp.prototype.focus = function () {\n        if (this.ctrInput) {\n            this.ctrInput.nativeElement.focus();\n        }\n        else {\n            this._focus = true;\n        }\n    };\n    return CompleterCmp;\n}());\nexport { CompleterCmp };\nCompleterCmp.decorators = [\n    { type: Component, args: [{\n                selector: \"ng2-completer\",\n                template: \"\\n        <div class=\\\"completer-holder\\\" ctrCompleter>\\n            <input #ctrInput [attr.id]=\\\"inputId.length > 0 ? inputId : null\\\" type=\\\"search\\\" class=\\\"completer-input\\\" ctrInput [ngClass]=\\\"inputClass\\\" [(ngModel)]=\\\"searchStr\\\" (ngModelChange)=\\\"onChange($event)\\\" [attr.name]=\\\"inputName\\\" [placeholder]=\\\"placeholder\\\"\\n                [attr.maxlength]=\\\"maxChars\\\" [tabindex]=\\\"fieldTabindex\\\" [disabled]=\\\"disableInput\\\" [clearSelected]=\\\"clearSelected\\\" [overrideSuggested]=\\\"overrideSuggested\\\" \\n                [fillHighlighted]=\\\"fillHighlighted\\\" (blur)=\\\"onBlur()\\\" (focus)=\\\"onFocus()\\\" autocomplete=\\\"off\\\" autocorrect=\\\"off\\\" autocapitalize=\\\"off\\\" />\\n\\n            <div class=\\\"completer-dropdown-holder\\\" *ctrList=\\\"dataService; minSearchLength: minSearchLength; pause: pause; autoMatch: autoMatch; let items = results; let searchActive = searching; let isInitialized = searchInitialized;\\\">\\n                <div class=\\\"completer-dropdown\\\" ctrDropdown *ngIf=\\\"isInitialized\\\">\\n                    <div *ngIf=\\\"searchActive && displaySearching\\\" class=\\\"completer-searching\\\">{{textSearching}}</div>\\n                    <div *ngIf=\\\"!searchActive && (!items || items.length === 0)\\\" class=\\\"completer-no-results\\\">{{textNoResults}}</div>\\n                    <div class=\\\"completer-row-wrapper\\\" *ngFor=\\\"let item of items; let rowIndex=index\\\">\\n                        <div class=\\\"completer-row\\\" [ctrRow]=\\\"rowIndex\\\" [dataItem]=\\\"item\\\">\\n                            <div *ngIf=\\\"item.image || item.image === ''\\\" class=\\\"completer-image-holder\\\">\\n                                <img *ngIf=\\\"item.image != ''\\\" src=\\\"{{item.image}}\\\" class=\\\"completer-image\\\" />\\n                                <div *ngIf=\\\"item.image === ''\\\" class=\\\"completer-image-default\\\"></div>\\n                            </div>\\n                            <div class=\\\"completer-item-text\\\" [ngClass]=\\\"{'completer-item-text-image': item.image || item.image === '' }\\\">\\n                                <completer-list-item class=\\\"completer-title\\\" [text]=\\\"item.title\\\" [matchClass]=\\\"matchClass\\\" [searchStr]=\\\"searchStr\\\" [type]=\\\"'title'\\\"></completer-list-item>\\n                                <completer-list-item *ngIf=\\\"item.description && item.description != ''\\\" class=\\\"completer-description\\\" [text]=\\\"item.description\\\"\\n                                    [matchClass]=\\\"matchClass\\\" [searchStr]=\\\"searchStr\\\" [type]=\\\"'description'\\\">\\n                                </completer-list-item>\\n                            </div>\\n                        </div>\\n                    </div>\\n                </div>\\n            </div>\\n        </div>\\n    \",\n                styles: [\"\\n    .completer-dropdown {\\n        border-color: #ececec;\\n        border-width: 1px;\\n        border-style: solid;\\n        border-radius: 2px;\\n        width: 250px;\\n        padding: 6px;\\n        cursor: pointer;\\n        z-index: 9999;\\n        position: absolute;\\n        margin-top: -6px;\\n        background-color: #ffffff;\\n    }\\n\\n    .completer-row {\\n        padding: 5px;\\n        color: #000000;\\n        margin-bottom: 4px;\\n        clear: both;\\n        display: inline-block;\\n        width: 103%;\\n    }\\n\\n    .completer-selected-row {\\n        background-color: lightblue;\\n        color: #ffffff;\\n    }\\n\\n    .completer-description {\\n        font-size: 14px;\\n    }\\n\\n    .completer-image-default {\\n        width: 16px; \\n        height: 16px;\\n        background-image: url(\\\"demo/res/img/default.png\\\");\\n    }\\n\\n    .completer-image-holder {\\n        float: left;\\n        width: 10%;\\n    }\\n    .completer-item-text-image {\\n        float: right;\\n        width: 90%;\\n    }\\n    \"],\n                providers: [COMPLETER_CONTROL_VALUE_ACCESSOR]\n            },] },\n];\n/** @nocollapse */\nCompleterCmp.ctorParameters = function () { return [\n    { type: CompleterService, },\n]; };\nCompleterCmp.propDecorators = {\n    'dataService': [{ type: Input },],\n    'datasource': [{ type: Input },],\n    'inputName': [{ type: Input },],\n    'inputId': [{ type: Input },],\n    'pause': [{ type: Input },],\n    'minSearchLength': [{ type: Input },],\n    'maxChars': [{ type: Input },],\n    'overrideSuggested': [{ type: Input },],\n    'clearSelected': [{ type: Input },],\n    'fillHighlighted': [{ type: Input },],\n    'placeholder': [{ type: Input },],\n    'matchClass': [{ type: Input },],\n    'textSearching': [{ type: Input },],\n    'textNoResults': [{ type: Input },],\n    'fieldTabindex': [{ type: Input },],\n    'autoMatch': [{ type: Input },],\n    'disableInput': [{ type: Input },],\n    'inputClass': [{ type: Input },],\n    'autofocus': [{ type: Input },],\n    'selected': [{ type: Output },],\n    'highlighted': [{ type: Output },],\n    'blur': [{ type: Output },],\n    'focusEvent': [{ type: Output, args: [\"focus\",] },],\n    'completer': [{ type: ViewChild, args: [CtrCompleter,] },],\n    'ctrInput': [{ type: ViewChild, args: [\"ctrInput\",] },],\n};\n//# sourceMappingURL=completer-cmp.js.map","\"use strict\";\nimport { Component, Input } from \"@angular/core\";\nvar CompleterListItemCmp = (function () {\n    function CompleterListItemCmp() {\n        this.parts = [];\n    }\n    CompleterListItemCmp.prototype.ngOnInit = function () {\n        if (!this.searchStr) {\n            this.parts.push({ isMatch: false, text: this.text });\n            return;\n        }\n        var matchStr = this.text.toLowerCase();\n        var matchPos = matchStr.indexOf(this.searchStr.toLowerCase());\n        var startIndex = 0;\n        while (matchPos >= 0) {\n            var matchText = this.text.slice(matchPos, matchPos + this.searchStr.length);\n            if (matchPos === 0) {\n                this.parts.push({ isMatch: true, text: matchText });\n                startIndex += this.searchStr.length;\n            }\n            else if (matchPos > 0) {\n                var matchPart = this.text.slice(startIndex, matchPos);\n                this.parts.push({ isMatch: false, text: matchPart });\n                this.parts.push({ isMatch: true, text: matchText });\n                startIndex += this.searchStr.length + matchPart.length;\n            }\n            matchPos = matchStr.indexOf(this.searchStr.toLowerCase(), startIndex);\n        }\n        if (startIndex < this.text.length) {\n            this.parts.push({ isMatch: false, text: this.text.slice(startIndex, this.text.length) });\n        }\n    };\n    return CompleterListItemCmp;\n}());\nexport { CompleterListItemCmp };\nCompleterListItemCmp.decorators = [\n    { type: Component, args: [{\n                selector: \"completer-list-item\",\n                template: \"\\n    <span class=\\\"completer-list-item-holder\\\" [ngClass]=\\\"{'completer-title': type === 'title', 'completer-description': type === 'description'}\\\" >\\n        <span class=\\\"completer-list-item\\\" *ngFor=\\\"let part of parts\\\" [ngClass]=\\\"part.isMatch ? matchClass : null\\\">{{part.text}}</span>\\n    </span>\\n    \"\n            },] },\n];\n/** @nocollapse */\nCompleterListItemCmp.ctorParameters = function () { return []; };\nCompleterListItemCmp.propDecorators = {\n    'text': [{ type: Input },],\n    'searchStr': [{ type: Input },],\n    'matchClass': [{ type: Input },],\n    'type': [{ type: Input },],\n};\n//# sourceMappingURL=completer-list-item-cmp.js.map","import { Directive, ElementRef, Host, HostListener } from \"@angular/core\";\nimport { CtrCompleter } from \"./ctr-completer\";\nvar CtrRowItem = (function () {\n    function CtrRowItem(row, index) {\n        this.row = row;\n        this.index = index;\n    }\n    return CtrRowItem;\n}());\nexport { CtrRowItem };\nvar CtrDropdown = (function () {\n    function CtrDropdown(completer, el) {\n        this.completer = completer;\n        this.el = el;\n        this.rows = [];\n        this.completer.registerDropdown(this);\n    }\n    CtrDropdown.prototype.ngOnInit = function () {\n        var css = getComputedStyle(this.el.nativeElement);\n        this.isScrollOn = css.maxHeight && css.overflowY === \"auto\";\n    };\n    CtrDropdown.prototype.ngOnDestroy = function () {\n        this.completer.registerDropdown(null);\n    };\n    CtrDropdown.prototype.onMouseDown = function (event) {\n        var _this = this;\n        // Support for canceling blur on IE (issue #158)\n        this.completer.cancelBlur(true);\n        setTimeout(function () {\n            _this.completer.cancelBlur(false);\n        }, 0);\n    };\n    CtrDropdown.prototype.registerRow = function (row) {\n        this.rows.push(row);\n    };\n    CtrDropdown.prototype.highlightRow = function (index) {\n        var highlited = this.rows.find(function (row) { return row.index === index; });\n        if (index < 0) {\n            if (this.currHighlited) {\n                this.currHighlited.row.setHighlited(false);\n            }\n            this.currHighlited = undefined;\n            this.completer.onHighlighted(null);\n            return;\n        }\n        if (!highlited) {\n            return;\n        }\n        if (this.currHighlited) {\n            this.currHighlited.row.setHighlited(false);\n        }\n        this.currHighlited = highlited;\n        this.currHighlited.row.setHighlited(true);\n        this.completer.onHighlighted(this.currHighlited.row.getDataItem());\n    };\n    CtrDropdown.prototype.clear = function () {\n        this.rows = [];\n    };\n    CtrDropdown.prototype.onSelected = function (item) {\n        this.completer.onSelected(item);\n    };\n    CtrDropdown.prototype.selectCurrent = function () {\n        if (this.currHighlited) {\n            this.onSelected(this.currHighlited.row.getDataItem());\n        }\n        else if (this.rows.length > 0) {\n            this.onSelected(this.rows[0].row.getDataItem());\n        }\n    };\n    CtrDropdown.prototype.nextRow = function () {\n        var nextRowIndex = 0;\n        if (this.currHighlited) {\n            nextRowIndex = this.currHighlited.index + 1;\n        }\n        this.highlightRow(nextRowIndex);\n        if (this.isScrollOn && this.currHighlited) {\n            var row = this.currHighlited.row.getNativeElement();\n            if (this.dropdownHeight() < row.getBoundingClientRect().bottom) {\n                this.dropdownScrollTopTo(this.dropdownRowOffsetHeight(row));\n            }\n        }\n    };\n    CtrDropdown.prototype.prevRow = function () {\n        var nextRowIndex = -1;\n        if (this.currHighlited) {\n            nextRowIndex = this.currHighlited.index - 1;\n        }\n        this.highlightRow(nextRowIndex);\n        if (this.isScrollOn && this.currHighlited) {\n            var rowTop = this.dropdownRowTop();\n            if (rowTop < 0) {\n                this.dropdownScrollTopTo(rowTop - 1);\n            }\n        }\n    };\n    CtrDropdown.prototype.dropdownScrollTopTo = function (offset) {\n        this.el.nativeElement.scrollTop = this.el.nativeElement.scrollTop + offset;\n    };\n    CtrDropdown.prototype.dropdownRowTop = function () {\n        return this.currHighlited.row.getNativeElement().getBoundingClientRect().top -\n            (this.el.nativeElement.getBoundingClientRect().top +\n                parseInt(getComputedStyle(this.el.nativeElement).paddingTop, 10));\n    };\n    CtrDropdown.prototype.dropdownHeight = function () {\n        return this.el.nativeElement.getBoundingClientRect().top +\n            parseInt(getComputedStyle(this.el.nativeElement).maxHeight, 10);\n    };\n    CtrDropdown.prototype.dropdownRowOffsetHeight = function (row) {\n        var css = getComputedStyle(row);\n        return row.offsetHeight +\n            parseInt(css.marginTop, 10) + parseInt(css.marginBottom, 10);\n    };\n    return CtrDropdown;\n}());\nexport { CtrDropdown };\nCtrDropdown.decorators = [\n    { type: Directive, args: [{\n                selector: \"[ctrDropdown]\",\n            },] },\n];\n/** @nocollapse */\nCtrDropdown.ctorParameters = function () { return [\n    { type: CtrCompleter, decorators: [{ type: Host },] },\n    { type: ElementRef, },\n]; };\nCtrDropdown.propDecorators = {\n    'onMouseDown': [{ type: HostListener, args: [\"mousedown\", [\"$event\"],] },],\n};\n//# sourceMappingURL=ctr-dropdown.js.map","import { Directive, ElementRef, EventEmitter, Host, HostListener, Input, Output } from \"@angular/core\";\nimport { NgModel } from \"@angular/forms\";\nimport { CtrCompleter } from \"./ctr-completer\";\n// keyboard events\nvar KEY_DW = 40;\nvar KEY_RT = 39;\nvar KEY_UP = 38;\nvar KEY_LF = 37;\nvar KEY_ES = 27;\nvar KEY_EN = 13;\nvar KEY_TAB = 9;\nvar CtrInput = (function () {\n    function CtrInput(completer, ngModel, el) {\n        var _this = this;\n        this.completer = completer;\n        this.ngModel = ngModel;\n        this.el = el;\n        this.clearSelected = false;\n        this.overrideSuggested = false;\n        this.fillHighlighted = true;\n        this.ngModelChange = new EventEmitter();\n        this._searchStr = \"\";\n        this._displayStr = \"\";\n        this.completer.selected.subscribe(function (item) {\n            if (!item) {\n                return;\n            }\n            if (_this.clearSelected) {\n                _this.searchStr = \"\";\n            }\n            else {\n                _this.searchStr = item.title;\n            }\n            _this.ngModelChange.emit(_this.searchStr);\n        });\n        this.completer.highlighted.subscribe(function (item) {\n            if (_this.fillHighlighted) {\n                if (item) {\n                    _this._displayStr = item.title;\n                    _this.ngModelChange.emit(item.title);\n                }\n                else {\n                    _this._displayStr = _this.searchStr;\n                    _this.ngModelChange.emit(_this.searchStr);\n                }\n            }\n        });\n        this.ngModel.valueChanges.subscribe(function (value) {\n            if (_this._displayStr != value) {\n                _this.searchStr = value;\n            }\n        });\n    }\n    CtrInput.prototype.keyupHandler = function (event) {\n        if (event.keyCode === KEY_LF || event.keyCode === KEY_RT || event.keyCode === KEY_TAB) {\n            // do nothing\n            return;\n        }\n        if (event.keyCode === KEY_UP || event.keyCode === KEY_EN) {\n            event.preventDefault();\n        }\n        else if (event.keyCode === KEY_DW) {\n            event.preventDefault();\n            this.completer.search(this.searchStr);\n        }\n        else if (event.keyCode === KEY_ES) {\n            this.restoreSearchValue();\n            this.completer.clear();\n        }\n        else {\n            this.completer.search(this.searchStr);\n        }\n    };\n    CtrInput.prototype.keydownHandler = function (event) {\n        if (event.keyCode === KEY_EN) {\n            if (this.completer.hasHighlited()) {\n                event.preventDefault();\n            }\n            this.handleSelection();\n        }\n        else if (event.keyCode === KEY_DW) {\n            event.preventDefault();\n            this.completer.nextRow();\n        }\n        else if (event.keyCode === KEY_UP) {\n            event.preventDefault();\n            this.completer.prevRow();\n        }\n        else if (event.keyCode === KEY_TAB) {\n            this.handleSelection();\n        }\n        else if (event.keyCode === KEY_ES) {\n            // This is very specific to IE10/11 #272\n            // without this, IE clears the input text\n            event.preventDefault();\n        }\n    };\n    CtrInput.prototype.onBlur = function (event) {\n        var _this = this;\n        // Check if we need to cancel Blur for IE\n        if (this.completer.isCancelBlur()) {\n            setTimeout(function () {\n                // get the focus back\n                _this.el.nativeElement.focus();\n            }, 0);\n            return;\n        }\n        setTimeout(function () {\n            if (_this.overrideSuggested) {\n                _this.completer.onSelected({ title: _this.searchStr, originalObject: null });\n            }\n            else {\n                _this.restoreSearchValue();\n            }\n            _this.completer.clear();\n        }, 200);\n    };\n    Object.defineProperty(CtrInput.prototype, \"searchStr\", {\n        get: function () {\n            return this._searchStr;\n        },\n        set: function (term) {\n            this._searchStr = term;\n            this._displayStr = term;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    CtrInput.prototype.handleSelection = function () {\n        if (this.overrideSuggested) {\n            this.completer.onSelected({ title: this.searchStr, originalObject: null });\n        }\n        else if (this.completer.hasHighlited()) {\n            this.completer.selectCurrent();\n        }\n        else {\n            this.completer.clear();\n        }\n    };\n    CtrInput.prototype.restoreSearchValue = function () {\n        if (this.fillHighlighted) {\n            // Restore searched value if there is no overrideSuggested\n            if (this._displayStr != this.searchStr) {\n                this._displayStr = this.searchStr;\n                this.ngModelChange.emit(this.searchStr);\n            }\n        }\n    };\n    return CtrInput;\n}());\nexport { CtrInput };\nCtrInput.decorators = [\n    { type: Directive, args: [{\n                selector: \"[ctrInput]\",\n            },] },\n];\n/** @nocollapse */\nCtrInput.ctorParameters = function () { return [\n    { type: CtrCompleter, decorators: [{ type: Host },] },\n    { type: NgModel, },\n    { type: ElementRef, },\n]; };\nCtrInput.propDecorators = {\n    'clearSelected': [{ type: Input, args: [\"clearSelected\",] },],\n    'overrideSuggested': [{ type: Input, args: [\"overrideSuggested\",] },],\n    'fillHighlighted': [{ type: Input, args: [\"fillHighlighted\",] },],\n    'ngModelChange': [{ type: Output },],\n    'keyupHandler': [{ type: HostListener, args: [\"keyup\", [\"$event\"],] },],\n    'keydownHandler': [{ type: HostListener, args: [\"keydown\", [\"$event\"],] },],\n    'onBlur': [{ type: HostListener, args: [\"blur\", [\"$event\"],] },],\n};\n//# sourceMappingURL=ctr-input.js.map","import \"rxjs/add/observable/timer\";\nimport { ChangeDetectorRef, Directive, Host, Input, TemplateRef, ViewContainerRef } from \"@angular/core\";\nimport { Observable, } from \"rxjs/Observable\";\nimport { CtrCompleter } from \"./ctr-completer\";\nimport { MIN_SEARCH_LENGTH, PAUSE, CLEAR_TIMEOUT } from \"../globals\";\nvar CtrListContext = (function () {\n    function CtrListContext(results, searching, searchInitialized) {\n        this.results = results;\n        this.searching = searching;\n        this.searchInitialized = searchInitialized;\n    }\n    return CtrListContext;\n}());\nexport { CtrListContext };\nvar CtrList = (function () {\n    function CtrList(completer, templateRef, viewContainer, cd) {\n        this.completer = completer;\n        this.templateRef = templateRef;\n        this.viewContainer = viewContainer;\n        this.cd = cd;\n        this.ctrListMinSearchLength = MIN_SEARCH_LENGTH;\n        this.ctrListPause = PAUSE;\n        this.ctrListAutoMatch = false;\n        // private results: CompleterItem[] = [];\n        this.term = null;\n        // private searching = false;\n        this.searchTimer = null;\n        this.clearTimer = null;\n        this.ctx = new CtrListContext([], false, false);\n    }\n    CtrList.hasTerm = function (term) {\n        return term || term === \"\";\n    };\n    CtrList.prototype.ngOnInit = function () {\n        this.completer.registerList(this);\n        this.viewContainer.createEmbeddedView(this.templateRef, new CtrListContext([], false, false));\n    };\n    Object.defineProperty(CtrList.prototype, \"dataService\", {\n        set: function (newService) {\n            var _this = this;\n            this._dataService = newService;\n            if (this._dataService) {\n                this._dataService\n                    .catch(function (err) { return _this.handleError(err); })\n                    .subscribe(function (results) {\n                    _this.ctx.searchInitialized = true;\n                    _this.ctx.searching = false;\n                    _this.ctx.results = results;\n                    if (_this.ctrListAutoMatch && results.length === 1 && results[0].title && CtrList.hasTerm(_this.term) &&\n                        results[0].title.toLocaleLowerCase() === _this.term.toLocaleLowerCase()) {\n                        // Do automatch\n                        _this.completer.onSelected(results[0]);\n                    }\n                    _this.refreshTemplate();\n                });\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    CtrList.prototype.search = function (term) {\n        var _this = this;\n        if (CtrList.hasTerm(term) && term.length >= this.ctrListMinSearchLength && this.term !== term) {\n            if (this.searchTimer) {\n                this.searchTimer.unsubscribe();\n                this.searchTimer = null;\n            }\n            if (!this.ctx.searching) {\n                this.ctx.results = [];\n                this.ctx.searching = true;\n                this.ctx.searchInitialized = true;\n                this.refreshTemplate();\n            }\n            if (this.clearTimer) {\n                this.clearTimer.unsubscribe();\n            }\n            this.searchTimer = Observable.timer(this.ctrListPause).subscribe(function () {\n                _this.searchTimerComplete(term);\n            });\n        }\n    };\n    CtrList.prototype.clear = function () {\n        var _this = this;\n        if (this.searchTimer) {\n            this.searchTimer.unsubscribe();\n        }\n        this.clearTimer = Observable.timer(CLEAR_TIMEOUT).subscribe(function () {\n            _this._clear();\n        });\n    };\n    CtrList.prototype._clear = function () {\n        if (this.searchTimer) {\n            this.searchTimer.unsubscribe();\n            this.searchTimer = null;\n        }\n        if (this.dataService) {\n            this.dataService.cancel();\n        }\n        this.ctx.results = [];\n        this.ctx.searchInitialized = false;\n        this.term = null;\n        this.viewContainer.clear();\n    };\n    CtrList.prototype.searchTimerComplete = function (term) {\n        // Begin the search\n        if (!CtrList.hasTerm(term) || term.length < this.ctrListMinSearchLength) {\n            this.ctx.searching = false;\n            return;\n        }\n        this.term = term;\n        this._dataService.search(term);\n    };\n    CtrList.prototype.handleError = function (error) {\n        this.ctx.searching = false;\n        var errMsg = \"search error\";\n        if (error) {\n            errMsg = (error.message) ? error.message :\n                error.status ? error.status + \" - \" + error.statusText : \"Server error\";\n        }\n        if (console && console.error) {\n            console.error(errMsg); // log to console\n        }\n        this.refreshTemplate();\n        return Observable.throw(errMsg);\n    };\n    CtrList.prototype.refreshTemplate = function () {\n        // Recreate the template\n        this.viewContainer.clear();\n        this.viewContainer.createEmbeddedView(this.templateRef, this.ctx);\n        this.cd.markForCheck();\n    };\n    return CtrList;\n}());\nexport { CtrList };\nCtrList.decorators = [\n    { type: Directive, args: [{\n                selector: \"[ctrList]\",\n            },] },\n];\n/** @nocollapse */\nCtrList.ctorParameters = function () { return [\n    { type: CtrCompleter, decorators: [{ type: Host },] },\n    { type: TemplateRef, },\n    { type: ViewContainerRef, },\n    { type: ChangeDetectorRef, },\n]; };\nCtrList.propDecorators = {\n    'ctrListMinSearchLength': [{ type: Input },],\n    'ctrListPause': [{ type: Input },],\n    'ctrListAutoMatch': [{ type: Input },],\n    'dataService': [{ type: Input, args: [\"ctrList\",] },],\n};\n//# sourceMappingURL=ctr-list.js.map","import { Directive, ElementRef, Host, HostListener, Input, Renderer } from \"@angular/core\";\nimport { CtrDropdown, CtrRowItem } from \"./ctr-dropdown\";\nvar CtrRow = (function () {\n    function CtrRow(el, renderer, dropdown) {\n        this.el = el;\n        this.renderer = renderer;\n        this.dropdown = dropdown;\n        this.selected = false;\n    }\n    CtrRow.prototype.ngOnInit = function () {\n        this.dropdown.registerRow(new CtrRowItem(this, this._rowIndex));\n    };\n    Object.defineProperty(CtrRow.prototype, \"ctrRow\", {\n        set: function (index) {\n            this._rowIndex = index;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(CtrRow.prototype, \"dataItem\", {\n        set: function (item) {\n            this._item = item;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    CtrRow.prototype.onClick = function (event) {\n        this.dropdown.onSelected(this._item);\n    };\n    CtrRow.prototype.onMouseEnter = function (event) {\n        this.dropdown.highlightRow(this._rowIndex);\n    };\n    CtrRow.prototype.setHighlited = function (selected) {\n        this.selected = selected;\n        this.renderer.setElementClass(this.el.nativeElement, \"completer-selected-row\", this.selected);\n    };\n    CtrRow.prototype.getNativeElement = function () {\n        return this.el.nativeElement;\n    };\n    CtrRow.prototype.getDataItem = function () {\n        return this._item;\n    };\n    return CtrRow;\n}());\nexport { CtrRow };\nCtrRow.decorators = [\n    { type: Directive, args: [{\n                selector: \"[ctrRow]\",\n            },] },\n];\n/** @nocollapse */\nCtrRow.ctorParameters = function () { return [\n    { type: ElementRef, },\n    { type: Renderer, },\n    { type: CtrDropdown, decorators: [{ type: Host },] },\n]; };\nCtrRow.propDecorators = {\n    'ctrRow': [{ type: Input },],\n    'dataItem': [{ type: Input },],\n    'onClick': [{ type: HostListener, args: [\"click\", [\"$event\"],] },],\n    'onMouseEnter': [{ type: HostListener, args: [\"mouseenter\", [\"$event\"],] },],\n};\n//# sourceMappingURL=ctr-row.js.map","import { NgModule } from \"@angular/core\";\nimport { FormsModule } from \"@angular/forms\";\nimport { HttpModule } from \"@angular/http\";\nimport { CompleterCmp } from \"./components/completer-cmp\";\nimport { CompleterListItemCmp } from \"./components/completer-list-item-cmp\";\nimport { CompleterService } from \"./services/completer-service\";\nimport { LocalDataFactoryProvider, RemoteDataFactoryProvider } from \"./services/completer-data-factory\";\nimport { CtrCompleter } from \"./directives/ctr-completer\";\nimport { CtrDropdown } from \"./directives/ctr-dropdown\";\nimport { CtrInput } from \"./directives/ctr-input\";\nimport { CtrList } from \"./directives/ctr-list\";\nimport { CtrRow } from \"./directives/ctr-row\";\nimport { CommonModule } from \"@angular/common\";\nvar Ng2CompleterModule = (function () {\n    function Ng2CompleterModule() {\n    }\n    return Ng2CompleterModule;\n}());\nexport { Ng2CompleterModule };\nNg2CompleterModule.decorators = [\n    { type: NgModule, args: [{\n                imports: [\n                    CommonModule,\n                    FormsModule,\n                    HttpModule\n                ],\n                declarations: [\n                    CompleterListItemCmp,\n                    CtrCompleter,\n                    CtrDropdown,\n                    CtrInput,\n                    CtrList,\n                    CtrRow,\n                    CompleterCmp\n                ],\n                exports: [\n                    CompleterCmp,\n                    CompleterListItemCmp,\n                    CtrCompleter,\n                    CtrDropdown,\n                    CtrInput,\n                    CtrList,\n                    CtrRow\n                ],\n                providers: [\n                    CompleterService,\n                    LocalDataFactoryProvider,\n                    RemoteDataFactoryProvider\n                ]\n            },] },\n];\n/** @nocollapse */\nNg2CompleterModule.ctorParameters = function () { return []; };\n//# sourceMappingURL=ng2-completer.module.js.map"],"names":["localDataFactory","LocalData","remoteDataFactory","http","RemoteData","CtrCompleter","this","selected","EventEmitter","highlighted","_hasHighlited","hasSelected","_cancelBlur","prototype","ngOnInit","registerList","list","registerDropdown","dropdown","onHighlighted","item","emit","onSelected","clear","search","term","selectCurrent","nextRow","prevRow","hasHighlited","cancelBlur","cancel","isCancelBlur","decorators","type","Directive","args","selector","ctorParameters","propDecorators","Output","__extends","extendStatics","Object","setPrototypeOf","__proto__","Array","d","b","p","hasOwnProperty","__","constructor","create","CompleterBaseData","_super","call","searchFields","_searchFields","titleField","_titleField","descriptionField","_descriptionField","imageField","_imageField","extractMatches","data","_this","split","undefined","filter","map","searchField","extractValue","value","some","toString","toLowerCase","indexOf","extractTitle","field","join","obj","key","keys","result","i","length","processResults","matches","formattedText","formattedDesc","image","results","push","title","description","originalObject","Subject","Observable","subscribe","res","_data","savedTerm","next","Injectable","_urlFormater","_dataField","remoteUrl","_remoteUrl","urlFormater","dataField","headers","_headers","url","encodeURIComponent","remoteSearch","get","Headers","json","matchaes","catch","err","error","unsubscribe","CompleterService","local","remote","Inject","MAX_CHARS","MIN_SEARCH_LENGTH","PAUSE","TEXT_SEARCHING","TEXT_NORESULTS","noop","COMPLETER_CONTROL_VALUE_ACCESSOR","provide","NG_VALUE_ACCESSOR","useExisting","forwardRef","CompleterCmp","multi","completerService","inputName","inputId","pause","minSearchLength","maxChars","overrideSuggested","clearSelected","fillHighlighted","placeholder","textSearching","textNoResults","autoMatch","disableInput","autofocus","blur","focusEvent","searchStr","control","FormControl","displaySearching","_onTouchedCallback","_onChangeCallback","_focus","defineProperty","set","v","enumerable","configurable","ngAfterViewInit","ngAfterViewChecked","ctrInput","nativeElement","focus","onTouched","writeValue","registerOnChange","fn","registerOnTouched","datasource","dataService","completer","onBlur","onFocus","onChange","open","searchValue","close","Component","template","styles","providers","Input","matchClass","fieldTabindex","inputClass","ViewChild","CompleterListItemCmp","parts","isMatch","text","matchStr","matchPos","startIndex","matchText","slice","matchPart","LocalDataFactoryProvider","useFactory","RemoteDataFactoryProvider","deps","Http","CtrRowItem","row","index","CtrDropdown","el","rows","css","getComputedStyle","isScrollOn","maxHeight","overflowY","ngOnDestroy","onMouseDown","event","setTimeout","registerRow","highlightRow","highlited","find","currHighlited","setHighlited","getDataItem","nextRowIndex","getNativeElement","dropdownHeight","getBoundingClientRect","bottom","dropdownScrollTopTo","dropdownRowOffsetHeight","rowTop","dropdownRowTop","offset","scrollTop","top","parseInt","paddingTop","offsetHeight","marginTop","marginBottom","Host","ElementRef","HostListener","CtrInput","ngModel","ngModelChange","_searchStr","_displayStr","valueChanges","keyupHandler","keyCode","preventDefault","restoreSearchValue","keydownHandler","handleSelection","NgModel","CtrListContext","searching","searchInitialized","CtrList","templateRef","viewContainer","cd","ctrListMinSearchLength","ctrListPause","ctrListAutoMatch","searchTimer","clearTimer","ctx","hasTerm","createEmbeddedView","newService","_dataService","handleError","toLocaleLowerCase","refreshTemplate","timer","searchTimerComplete","_clear","errMsg","message","status","statusText","console","throw","markForCheck","TemplateRef","ViewContainerRef","ChangeDetectorRef","CtrRow","renderer","_rowIndex","_item","onClick","onMouseEnter","setElementClass","Renderer","ctrRow","dataItem","Ng2CompleterModule","NgModule","imports","CommonModule","FormsModule","HttpModule","declarations","exports"],"mappings":"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"}